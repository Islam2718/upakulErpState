<div class="contentframe">
  <div class="d-flex justify-content-between align-items-center mb-3 mx-2">
    <h4 class="mb-0">Microfinance / Employee Register</h4>
     <button class="btn btn-success" (click)="navigateToCreate()"
 *ngIf="Button.createBtn" [innerHTML]="Button.createBtn+' Create'">
</button>
  </div>
  <div id="tableExample3">

    <!-- new...  -->
    <div class="mx-n4 px-4 mx-lg-n4 px-lg-6 bg-body-emphasis pt-4 border-y">
      <div>
        <div class="row align-items-end justify-content-between pb-4 g-3">
          <div class="col-auto">
            <h3>Employee Register</h3>
            <!-- <p class="text-body-tertiary lh-sm mb-0">subtitle </p> -->
          </div>
          <div class="col-12 col-md-auto">
            <div class="row g-2 gy-3">
              <div class="col-auto flex-1">
                <div class="search-box">
                  <form class="position-relative" [formGroup]="searchForm">
                    <input class="form-control search-input search form-control-sm" type="search" placeholder="Search"
                      aria-label="Search" formControlName="searchTerm" />
                    
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="table-responsive mx-n1 px-1 scrollbar">
          <table class="table fs-9 mb-0 border-top border-translucent">
            <thead>
              <tr>
                <th class="sort align-middle asc" scope="col">Employee</th>
                <th class="sort align-middle asc" scope="col">Group</th>
                <th class="sort align-middle asc" scope="col">Joining Date</th>
                <th class="text-end align-middle pe-4" scope="col">Actions</th>
              </tr>
            </thead>
            <tbody class="list" id="table-latest-review-body">
              <tr *ngFor="let obj of listData" class="hover-actions-trigger btn-reveal-trigger position-static">

                <td class="align-middle review px-2">{{ obj.employeeCode }} &mdash; {{ obj.employeeName }}</td>
                <td class="align-middle ps-3">{{obj.groupCode}} &mdash; {{obj.groupName}}</td>
                <td class="align-middle review px-2">
                  {{ obj.joiningDate | date: 'dd-MMM-yyyy' }}
                </td>
                 <td class="align-middle text-end pe-0">
                  <div class="btn-group btn-group-sm" role="group">
                      <button class="btn btn-sm btn-phoenix-secondary shadow me-1"
                        ng-class="{ 'd-none': obj.isApproved === true }" title="Release"
                        (click)="setReleaseModalFunc(obj)" data-bs-toggle="modal" data-bs-target="#releaseModal">
                        <i class="fa fa-thumb-tack" style="transform: rotate(145deg);" aria-hidden="true"></i>
                      </button>

                  </div>
                </td>

              </tr>
            </tbody>
          </table>
        </div>
        <!-- pagination section  -->
        <div class="pagination_size d-flex justify-content-between align-items-center my-3 flex-wrap">
          <div class="d-flex align-items-center mb-2 mb-md-0">
            <label class="me-2">Page Size:</label>
            <select class="form-select form-select-sm w-auto" [formControl]="pageSizeControl">
              <option [value]="10">10</option>
              <option [value]="20">20</option>
              <option [value]="40">40</option>
            </select>
          </div>
          <!-- Pagination -->
          <nav>
            <div class="pagination-container d-flex align-items-center">
              <p class="pagination-label mb-0 me-2">{{ dataRangeLabel }}</p>
              <ul class="pagination mb-0">
                <li class="page-item" [class.disabled]="page === 1">
                  <button class="page-link" (click)="changePage(page - 1)">
                    «
                  </button>
                </li>
                <li *ngFor="let p of totalPagesArray" class="page-item" [class.active]="p === page">
                  <button class="page-link" (click)="changePage(p)" *ngIf="p !== '...'">
                    {{ p }}
                  </button>
                  <span class="page-link" *ngIf="p === '...'">...</span>
                </li>
                <li class="page-item" [class.disabled]="page === totalPages">
                  <button class="page-link" (click)="changePage(page + 1)">
                    »
                  </button>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
    <!-- new...  -->

  </div>
</div>




<!-- Modal -->
<div #releaseModal class="modal fade" tabindex="-1">
  <div class="modal-dialog">
    <form [formGroup]="releaseForm" (ngSubmit)="onSubmitRelease()">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title1" id="exampleModalLabel">Release</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
            (click)="closeReleaseModal()"></button>
        </div>
        <input class="form-control" formControlName="Id" type="hidden">
        <input class="form-control" formControlName="EmployeeId" type="hidden">
        <input class="form-control" formControlName="GroupId" type="hidden">
        <input class="form-control" formControlName="JoiningDate" type="hidden">

        <div class="modal-body">
          <div class="row">
            <div class="col-md-12 mt-2 pb-2">
              <label class="form-label">Group</label>
              <input class="form-control bg-light" formControlName="ReleaseGroup" type="text" readonly />
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 mt-2 pb-2">
              <label class="form-label">Release Employee</label>
              <input class="form-control bg-light" formControlName="ReleaseEmployee" type="text" readonly />
            </div>
          </div>

          <div class="row">
            <div class="col-md-12 mt-2 pb-2">
              <label class="form-label">Release Note</label>
              <input class="form-control bg-light" formControlName="ReleaseNote" type="text" required />
            </div>
          </div>

        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeReleaseModal()">Close</button>
          <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeModal()">Close</button> -->
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </div>
    </form>
  </div>
</div>
<!-- end Modal -->


<!-- Overlay for not permitted -->
<div *ngIf="!isPermitted" class="overlay">
  <div class="message-box">You are not permitted</div>
</div>